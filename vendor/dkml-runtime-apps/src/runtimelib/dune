(rule
 (target dkml_config.ml)
 (action
  (with-stdout-to
   %{target}
   (progn
    (echo "let version = String.trim {|%{read:version.txt}|}\n")
    (echo
     "let ocaml_opam_repository_gitref = String.trim {|%{read:ocaml_opam_repository_gitref.txt}|}\n")
    (echo "let ocaml_system = String.trim {|%{system}|}\n")))))

(library
 (name dkml_runtimelib)
 (public_name dkml-runtimelib)
 (libraries
  dkml-c-probe
  astring
  bos
  fmt
  fpath
  sexplib
  ptime
  ptime.clock.os
  uri
  xdg))
